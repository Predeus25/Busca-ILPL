<!DOCTYPE html>

<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Busca ILPL / Cadastro - Etapa 3</title>
  <link rel="stylesheet" href="styles_cadastro.css">
</head>

<body>

    <div class="cadastro-container">
        <h2>Dados do Responsável</h2>
        <form action="Dados_Resp.php" method="POST" enctype="multipart/form-data">

            <!-- Nome -->
            <input type="text" name="txtNome" placeholder="Nome completo" required>

            <!-- Número e E-mail -->
            <label for="paren">Opções de contato:</label>
            <div class="dois">
                <input type="text" name="txtEmail" placeholder="E-mail" required>
                <input type="text" name="txtCell" placeholder="Celular" maxlength="14" oninput="aplicarMascaraCelular(this)" required>
            </div>


            <!-- RG e CPF -->
            <div class="dois">
                <input type="text" name="txtRg" placeholder="RG" maxlength="10" oninput="aplicarMascaraRG(this)" required>
                <input type="text" name="txtCpf" placeholder="CPF" maxlength="14" oninput="aplicarMascaraCPF(this)" required>
            </div>

            <!-- Parentesco -->
            <label for="paren">Qual grau de parentesco:</label>
            <select name="paren" id="paren" onchange="verificarOutraDoenca()">
                <option value="">Selecione...</option>
                <option value="Nenhuma">Filha(o)</option>
                <option value="irmao">Irmã(o)</option>
                <option value="neto">Neta(o)</option>
                <option value="Outro">Outro</option>
            </select>
            <input type="text" name="outro_paren" id="outro_paren" class="hidden" placeholder="Informe qual seu parentesco">

            <!-- Endereço -->
            <input type="text" name="txtEnd" placeholder="Endereço" required>
            <div class="dois">
                <input type="text" name="txtBairro" placeholder="Bairro" required>
                <input type="text" name="txtNum" placeholder="Número" required>
            </div>
            <div class="dois">
                <input type="text" name="txtComp" placeholder="Complemento" required>
                <input type="text" name="txtCep" placeholder="CEP" maxlength="8" oninput="aplicarMascaraCEP(this)" required>
            </div>

            <!-- Tipo Sanguíneo -->
            <label for="tipo_sanguineo">Tipo sanguíneo:</label>
            <select name="tipo_sanguineo" required>
                <option value="">Selecione...</option>
                <option value="A+">A+</option>
                <option value="A-">A-</option>
                <option value="B+">B+</option>
                <option value="B-">B-</option>
                <option value="AB+">AB+</option>
                <option value="AB-">AB-</option>
                <option value="O+">O+</option>
                <option value="O-">O-</option>
            </select>

            <!-- Botões -->
            <div class="btn-group">
                <button type="button" onclick="history.back()">Voltar</button>
                <button type="submit" onclick="salvarAssinatura()">Cadastrar</button>
            </div>
        </form>
    </div>


    <!-- Script JS para mostrar campo "outra doença" -->
    <script>

        function verificarOutraDoenca() {
            const select = document.getElementById('paren');
            const outraInput = document.getElementById('outra-paren');
            if (select.value === 'Outra') {
                outraInput.classList.remove('hidden');
                outraInput.required = true;
            } else {
                outraInput.classList.add('hidden');
                outraInput.required = false;
            }
        }

        function aplicarMascaraRG(input) {
            let valor = input.value.replace(/\D/g, '');
            if (valor.length <= 9) {
                input.value = valor.replace(/(\d{2})(\d{3})(\d{3})(\d{1})/, '$1.$2.$3-$4');
            }
        }

        function aplicarMascaraCPF(input) {
            let valor = input.value.replace(/\D/g, ''); 
            if (valor.length <= 11) {
                input.value = valor.replace(/(\d{3})(\d{3})(\d{3})(\d{1})/, '$1.$2.$3-$4');
            }
        }

        function aplicarMascaraCEP(input) {
            let valor = input.value.replace(/\D/g, '');
            if (valor.length <= 8) {
                input.value = valor.replace(/(\d{5})(\d{3})/, '$1-$2');
            }
        }

        function aplicarMascaraData(input) {
            let valor = input.value.replace(/\D/g, '');
            if (valor.length <= 2) {
                input.value = valor.replace(/(\d{1,2})/, '$1');
            } else if (valor.length <= 4) {
                input.value = valor.replace(/(\d{2})(\d{1,2})/, '$1/$2');
            } else if (valor.length <= 8) {
                input.value = valor.replace(/(\d{2})(\d{2})(\d{1,4})/, '$1/$2/$3');
            }
        }

        function aplicarMascaraCelular(input) {
            let valor = input.value.replace(/\D/g, ''); 
            if (valor.length <= 11) {
                input.value = valor.replace(/(\d{2})(\d{5})(\d{4})/, '($1) $2-$3');
            }
        }

  </script>

</body>

</html>